<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <script>
      // Single Page Apps for GitHub Pages
      // https://github.com/rafgraph/spa-github-pages

      (function () {
        // Get the repository name from the path
        const pathSegments = window.location.pathname.split('/');
        const repoName = pathSegments[1]; // First segment after domain

        // Check if we're on a project page (subdirectory)
        // On GitHub Pages, hostname is user.github.io
        const isProjectPage =
          window.location.hostname.includes('github.io') &&
          pathSegments.length > 1 &&
          repoName &&
          !repoName.includes('.');

        // Build the redirect URL
        let redirectUrl;
        if (isProjectPage) {
          // Project page: /repo-name/path -> /repo-name/?redirect=/path
          const remainingPath = pathSegments.slice(2).join('/');
          redirectUrl = '/' + repoName + '/?redirect=/' + remainingPath + window.location.hash;
        } else {
          // Root page: /path -> /?redirect=/path
          redirectUrl = '/?redirect=' + window.location.pathname + window.location.hash;
        }

        // Preserve query parameters
        if (window.location.search) {
          redirectUrl += '&' + window.location.search.slice(1);
        }

        window.location.replace(redirectUrl);
      })();
    </script>
  </head>
  <body>
    <h1>Redirecting...</h1>
    <p>If you are not redirected, <a id="redirect-link" href="/">click here</a>.</p>
    <script>
      document.getElementById('redirect-link').href = window.location.href;
    </script>
  </body>
</html>
